<div class="container mt-5">
  <h1>Stocks</h1>

  <!-- "Ajouter" button at the top -->
  <button class="btn btn-success mb-4" (click)="onAddStockClick()">Ajouter un Stock</button>
 <div class="card" *ngIf="open">
  <div class="card-header">
    <h3>Ajouter un Stock</h3>
  </div>
  <div class="card-body">
    <form [formGroup]="stockForm" (ngSubmit)="addStock()">
      <div class="mb-3">
        <label for="symbol" class="form-label">Symbol</label>
        <input id="symbol" type="text" class="form-control" formControlName="symbol" required />
      </div>

      <div class="mb-3">
        <label for="currentPrice" class="form-label">Current Price</label>
        <input id="currentPrice" type="number" class="form-control" formControlName="currentPrice" required />
      </div>

      <div class="mb-3">
        <label for="companyName" class="form-label">Company Name</label>
        <input id="companyName" type="text" class="form-control" formControlName="companyName" required />
      </div>

      <div class="mb-3">
        <label for="marketCap" class="form-label">Market Cap</label>
        <input id="marketCap" type="number" class="form-control" formControlName="marketCap" required />
      </div>

      <button type="submit" class="btn btn-primary" [disabled]="!stockForm.valid">
       'Ajouter
      </button>
    </form>
  </div>
 </div>
 <mat-card >
  <mat-card-title class="text-center">Forecast List</mat-card-title>
  <mat-card-content>
    <table class="table table-bordered mt-4">
      <thead>
        <tr>
          <th>Symbol</th>
          <th>Current Price</th>
          <th>Company Name</th>
          <th>Market Cap</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let stock of stocks">
          <td>{{ stock.symbol }}</td>
          <td>{{ stock.currentPrice }}</td>
          <td>{{ stock.companyName }}</td>
          <td>{{ stock.marketCap }}</td>
          <td>
            <button mat-raised-button color="warn"(click)="selectStock(stock)">Modifier</button>
            <button mat-raised-button color="primary" (click)="deleteStock(stock.idStock)">Supprimer</button>
          </td>
        </tr>
      </tbody>
    </table>
  </mat-card-content>
</mat-card>

  <!-- Liste des stocks -->


  <!-- Formulaire d'ajout et de modification -->
  <div *ngIf="selectedStock || newStock.idStock" class="card mt-4">
    <div class="card-header">
      <h3>{{ selectedStock ? 'Modifier Stock' : 'Ajouter un Stock' }}</h3>
    </div>
    <div class="card-body">
      <form [formGroup]="stockForm" (ngSubmit)="selectedStock ? updateStock(selectedStock) : addStock()">
        <div class="mb-3">
          <label for="symbol" class="form-label">Symbol</label>
          <input id="symbol" type="text" class="form-control" formControlName="symbol" required />
        </div>

        <div class="mb-3">
          <label for="currentPrice" class="form-label">Current Price</label>
          <input id="currentPrice" type="number" class="form-control" formControlName="currentPrice" required />
        </div>

        <div class="mb-3">
          <label for="companyName" class="form-label">Company Name</label>
          <input id="companyName" type="text" class="form-control" formControlName="companyName" required />
        </div>

        <div class="mb-3">
          <label for="marketCap" class="form-label">Market Cap</label>
          <input id="marketCap" type="number" class="form-control" formControlName="marketCap" required />
        </div>

        <button type="submit" class="btn btn-primary" [disabled]="!stockForm.valid">
          {{ selectedStock ? 'Modifier' : 'Ajouter' }}
        </button>
      </form>
    </div>
  </div>
</div>
